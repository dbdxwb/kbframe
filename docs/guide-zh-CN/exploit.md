## 开发规范

目录

- 编码规范
- 框架规范
- 数据库规范

### 编码规范

- 符合PSR-1/PSR-2的PHP编程
- 方法和函数有注释，注释内容包括功用，参数，返回值，必要时还有示例
- 方法命名规范，驼峰命名，不能出现下划线
- 类属性规范，类属性和类方法一致,统一使用驼峰
- 函数命名 小写字母加下划线
- 常量全部大写下划线分割
- 变量、函数名一律为小写格式
- 属性名称开头小写驼峰
- 类私有成员属性，下划线小写开头驼峰
- 以标准计算机英文为蓝本，杜绝一切拼音、或拼音英文混杂的命名方式
- PHP 的内建值 true、false 和null必须全部采用小写字母书写
- 文件编码为 UTF-8，并关闭 UTF-8 BOM((Byte Order Mark))的功能。切记请不要使用windows自带的记事本编辑项目文件

### 框架规范

- 编码核心要求：1.功能完整，2.数据安全，3.扩展性强，执行效率高，4.代码易维护，易读懂
- 优先使用 Restful 路由，配合资源控制器使用，路由定义应采用按命名空间按分组的模式处理
- 绝大部分业务层类都可以使用代码生成器生成，需继承基类，基类继承抽象类的模式
- 控制器中原则上不允许使用非public的方法
- 控制器中应避免使用大量if判断，应将验证逻辑从控制器转移到请求类，复杂的判断可根据情景判断结合Rule重用代码
- 优先把获取数据仓库的代码放在repository层里面，优先使用repository层进行处理数据，避免直接的DB::table操作
- 优先使用Magic来处理页面多条件查询功能
- Services可用来处理商业逻辑和外部接口的功能
- 对于视图文件，如果Widgets里有公用小部件的话优先使用
- 可使用helper.php处理全局公共函数功能
- 对于需要很耗时且执行结果不需要很切确的，可以考虑使用队列的形式经常处理
- 必须使用Guzzle处理http请求，严禁使用原生Curl函数库
- 鼓励在代码类和有必要说明的地方使用注释或者文档说明

### 数据库规范

- 所有的字段必须添加注释
- 数据表名小写，多关键字使用下划线分割（关键字尽量全称）
- 字段名小写，多关键字使用下划线分割（关键字尽量全称）
- 所有的表应该都有 `status` 字段来标注数据状态(-1:已删除,0:禁用,1:正常)，业务状态请使用其他字段；`status`字段类型 为带符号的 `tinyin(4)`。如果还需要其他的数据状态 请先判断该状态的数据是有用的数据还是无意义的数据,有用的数据状态 > 2,无意义的数据状态 < -1
- 所有的删除（除开清空回收站操作） 请标记 `status` 为 -1
- 创建时间字段为`created_at`，修改时间字段为`updated_at`，类型int(10)
- 所有字段不允许`NULL`值
- 排序字段为 `sort`